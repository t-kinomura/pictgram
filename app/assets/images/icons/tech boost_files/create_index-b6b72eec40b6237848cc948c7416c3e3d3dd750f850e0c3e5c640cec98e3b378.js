(function(){$(function(){var e,n,o,t,a,l,r,c,s,i,f,d,p,g,h,m,u,T,b,x;for(a=$(document.getElementsByTagName("h2")),l=$(document.getElementsByTagName("h3")),b=[],s=[],r=0,p=a.length;r<p;r++)T=a[r],b=b.concat(T);for(i=0,g=l.length;i<g;i++)T=l[i],b=b.concat(T);for(n=b.sort(function(e,n){return e.offsetTop-n.offsetTop}),c=f=0,h=(n=$(n).clone()).length;f<h;c=++f)T=n[c],0===c&&(s=s.concat("<p class='text-bold text-large'>\u76ee\u6b21</h3>")),s="H2"===T.nodeName?s.concat("<a href='#"+T.innerHTML+"'><li>"+T.innerHTML+"</li></a>"):s.concat("<ul><a href='#"+T.innerHTML+"'><li>"+T.innerHTML+"</li></a>");for($(".book-index").append(s),d=0,m=a.length;d<m;d++)T=a[d],$(T).before("<span id='"+T.innerHTML+"' class='fragment'></span>");for(x=0,u=l.length;x<u;x++)T=l[x],$(T).before("<span id='"+T.innerHTML+"' class='fragment'></span>");return t=$(".book-index").offset().top,o=$(".book-index").offset().left,e=$(".navbar").offset().top+$(".book-detail").height()+200,$(window).scroll(function(){return t<=$(document).scrollTop()+50&&$(document).scrollTop()+50<e?($(".book-index").addClass("active"),$(".book-index").css("left",o)):($(document).scrollTop(),$(".book-index").removeClass("active"))})})}).call(this);